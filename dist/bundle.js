(()=>{"use strict";var n={365:(n,e,t)=>{t.d(e,{A:()=>d});var o=t(601),i=t.n(o),a=t(314),r=t.n(a)()(i());r.push([n.id,'/* Keyframes for the expansion, spring, and fade-in animation */\n@keyframes expandSpringIn {\n  0% {\n    transform: scaleY(0.1) scaleX(0.95);\n    opacity: 0;\n  }\n  60% {\n    transform: scaleY(1.05) scaleX(1);\n    opacity: 1;\n  }\n  100% {\n    transform: scaleY(1) scaleX(1);\n    opacity: 1;\n  }\n}\n\n/* Keyframes for chat message animation */\n@keyframes chatMessageIn {\n  0% {\n    transform: translateY(10px);\n    opacity: 0;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n/* Keyframes for typing indicator animation */\n@keyframes typingIndicator {\n  0%,\n  100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-5px);\n  }\n}\n\n.huddle-widget-container {\n  position: fixed;\n  top: 50%;\n  right: 0;\n  transform: translateY(-50%);\n  z-index: 1001;\n}\n\n.huddle-circle {\n  position: absolute;\n  top: 50%;\n  right: 20px;\n  transform: translateY(-50%);\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background-color: #007bff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  z-index: 1002;\n  background-size: cover;\n}\n\n.circle-avatar {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.huddle-widget {\n  display: none;\n  /* position: absolute; */\n  /* top: 50%; */\n  right: 0;\n  /* width: calc(min(100vw, 100vh * (9 / 16)));\n  height: calc(min(100vh, 100vw * (16 / 9))); */\n  /* Ensure the width does not exceed 400px while maintaining the 9:16 aspect ratio */\n  width: calc(min(400px, 100vw, 100vh * (9 / 16)));\n  height: calc(min(711px, 100vh, 100vw * (16 / 9)));\n  border: 1px solid #ccc;\n  background: #fff;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  border-radius: 10px;\n  animation: expandSpringIn 0.5s ease-out forwards;\n  /* transform: translateY(-50%); */\n\n  opacity: 0;\n}\n\n#huddleWidgetStoryContainer {\n  display: flex;\n  flex-direction: row;\n  overflow-x: auto;\n  padding: 10px;\n  border-bottom: 1px solid #ccc;\n  height: 100%;\n  /* background: black; */\n  position: relative;\n}\n.story {\n  position: relative;\n  width: 100px;\n  height: 150px;\n  margin-right: 10px;\n  cursor: pointer;\n}\n\n.story img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n/* Advanced transitions using keyframes */\n#huddleWidgetStoryChaptersContainer {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background: #007bff;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  overflow: hidden; /* Ensure content stays within bounds */\n}\n\n.chapter {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  transition: opacity 0.5s ease-in-out;\n}\n\n.chapter.show {\n  opacity: 1;\n}\n\n.story-overlay {\n  opacity: 0;\n  transition: opacity 0.5s ease-in-out;\n}\n\n.story-overlay.show {\n  opacity: 1;\n}\n\n.story-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  color: #fff;\n  padding: 5px;\n  box-sizing: border-box;\n  font-size: 14px;\n  opacity: 0;\n  animation-duration: 0.5s;\n  animation-fill-mode: forwards;\n}\n\n.story-overlay.show {\n  animation-name: fadeInOverlay;\n}\n\n@keyframes fadeInOverlay {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.huddle-widget-story-hidden {\n  display: none !important;\n}\n#huddleWidgetStoryProgressContainer {\n  position: absolute;\n  bottom: 0;\n  left: 8px;\n  right: 8px;\n  top: 8px;\n  height: 3px;\n  background: transparent;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 2px;\n}\n\n.progress-bar {\n  flex: 1;\n  background-color: gray;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n}\n\n.progress-bar .fill {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  width: 0;\n  transition: width linear;\n}\n\n.huddle-widget-nav-bar {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  /* width: 100%; */\n  color: white;\n  position: absolute;\n  top: 16px;\n  left: 0;\n  right: 0;\n  gap: 10px;\n}\n\n.huddle-menu-button {\n  background: white;\n  color: white;\n  border: none;\n  cursor: pointer;\n  border-radius: 50%;\n  min-width: 40px;\n  height: 40px;\n  background-size: cover;\n}\n\n.huddle-close-button {\n  background: none;\n  color: black;\n  border: none;\n  cursor: pointer;\n  border-radius: 50%;\n  font-size: 46px;\n}\n\n#huddleWidgetStoryCategoriesContainer {\n  display: flex;\n  overflow-x: auto;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 30px;\n  z-index: 1000;\n  align-items: center;\n  justify-content: start;\n  scrollbar-width: none; /* For Firefox */\n  -ms-overflow-style: none; /* For Internet Explorer and Edge */\n}\n#huddleWidgetStoryCategoriesContainer::-webkit-scrollbar {\n  display: none; /* For Chrome, Safari, and Opera */\n}\n\n#huddleWidgetStoryCategoriesContainer::after {\n  content: "";\n  flex: 0 0 10px; /* Prevent items from sticking to the right edge */\n}\n\n.story-category {\n  flex-shrink: 0; /* Ensure items don\'t shrink */\n  margin: 0 5px; /* Add some margin between items */\n  position: relative;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  margin: 0 8px;\n}\n\n.story-category img {\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  border-radius: 100%;\n}\n\n/* Target the huddleWidgetChatContainer div */\n#huddleWidgetChatContainer {\n  padding: 10px;\n  max-height: 300px;\n  overflow-y: auto;\n  position: absolute;\n  bottom: 94px;\n  left: 0;\n  right: 0;\n  scrollbar-width: thin; /* For Firefox */\n  scrollbar-color: #888 black; /* For Firefox */\n}\n\n/* Scrollbar Styles for WebKit */\n#huddleWidgetChatContainer::-webkit-scrollbar {\n  width: 8px; /* Make the scrollbar thinner */\n}\n\n#huddleWidgetChatContainer::-webkit-scrollbar-track {\n  background: black; /* Background of the scrollbar track */\n  border-radius: 10px; /* Rounded corners for the track */\n}\n\n#huddleWidgetChatContainer::-webkit-scrollbar-thumb {\n  background: #888; /* Color of the scrollbar handle */\n  border-radius: 10px; /* Rounded corners for the handle */\n}\n\n#huddleWidgetChatContainer::-webkit-scrollbar-thumb:hover {\n  background: #555; /* Darker color when hovered */\n}\n\n/* Create the blurred top effect */\n/* Create the blurred top effect */\n#huddleWidgetChatContainer::before {\n  content: "";\n  position: fixed;\n  top: -30px; /* Match the bottom position of the container */\n  left: 0;\n  right: 0;\n  height: 20px; /* Adjust height as needed */\n  width: 20px;\n  height: 20px;\n  background: white;\n  border-radius: 100%;\n  z-index: 2;\n}\n#huddleWidgetHideChat {\n  height: 30px;\n  position: absolute;\n  bottom: 64px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n\n#huddleWidgetHideChat button {\n  background: none;\n  color: white;\n  border: none;\n  cursor: pointer;\n}\n\n#huddleWidgetHideChat button:hover {\n  color: #007bff;\n}\n.chat-message {\n  margin: 10px 0;\n  padding: 10px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  animation: chatMessageIn 0.3s ease-out;\n}\n\n.user-message {\n  background: #007bff;\n  color: white;\n  text-align: right;\n  justify-content: flex-end;\n}\n\n.ai-message {\n  background: #e9ecef;\n  color: black;\n  text-align: left;\n  justify-content: flex-start;\n}\n\n.ai-avatar {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  margin-right: 10px;\n}\n\n.typing-indicator {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 10px;\n}\n\n.typing-indicator .dot {\n  width: 6px;\n  height: 6px;\n  margin: 0 2px;\n  background: #ccc;\n  border-radius: 50%;\n  animation: typingIndicator 1s infinite;\n}\n\n.typing-indicator .dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.typing-indicator .dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n.chat-input-container {\n  height: 64px;\n  display: flex;\n  padding: 10px;\n  /* border-top: 1px solid #ccc; */\n  box-sizing: border-box;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.05);\n}\n\n.chat-input-container input {\n  padding: 10px;\n  flex-grow: 1;\n  border: none;\n  box-sizing: border-box;\n  border-radius: 0 0 0 5px;\n  margin-right: 2px;\n}\n\n.chat-input-container button {\n  padding: 10px;\n  background: #007bff;\n  color: white;\n  border: none;\n  border-radius: 0 0 5px 0;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.fixed-top {\n  position: fixed !important;\n  top: 5px !important;\n  left: 50% !important;\n  transform: translateX(-50%) !important;\n}\n\n.fixed-bottom {\n  position: fixed !important;\n  bottom: 5px !important;\n  left: 50% !important;\n  transform: translateX(-50%) !important;\n}\n\n.huddle-highlight {\n  outline: 2px solid yellow;\n  animation: highlight-animation 2s ease-out;\n}\n\n@keyframes highlight-animation {\n  0% {\n    outline-width: 2px;\n  }\n  50% {\n    outline-width: 4px;\n  }\n  100% {\n    outline-width: 2px;\n  }\n}\n',""]);const d=r},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,i,a){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(o)for(var d=0;d<this.length;d++){var s=this[d][0];null!=s&&(r[s]=!0)}for(var l=0;l<n.length;l++){var c=[].concat(n[l]);o&&r[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},601:n=>{n.exports=function(n){return n[1]}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},r=[],d=0;d<n.length;d++){var s=n[d],l=o.base?s[0]+o.base:s[0],c=a[l]||0,u="".concat(l," ").concat(c);a[l]=c+1;var p=t(u),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var g=i(h,o);o.byIndex=d,e.splice(d,0,{identifier:u,updater:g,references:1})}r.push(u)}return r}function i(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,i){var a=o(n=n||[],i=i||{});return function(n){n=n||[];for(var r=0;r<a.length;r++){var d=t(a[r]);e[d].references--}for(var s=o(n,i),l=0;l<a.length;l++){var c=t(a[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}a=s}}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,i&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},e={};function t(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={id:o,exports:{}};return n[o](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o=t(72),i=t.n(o),a=t(825),r=t.n(a),d=t(659),s=t.n(d),l=t(56),c=t.n(l),u=t(540),p=t.n(u),h=t(113),g=t.n(h),m=t(365),y={};y.styleTagTransform=g(),y.setAttributes=c(),y.insert=s().bind(null,"head"),y.domAPI=r(),y.insertStyleElement=p(),i()(m.A,y),m.A&&m.A.locals&&m.A.locals,window.initializeHuddleWidget=async(n={})=>{const{apiKey:e,defaultDisplay:t=!0}=n;if(e)try{const n=await async function(n){const e=await async function(n=""){const e=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Error: ${e.status}`);try{return await e.json()}catch(n){throw new Error("Failed to parse JSON response")}}("/chat/data.json");if(console.log("Fetched data:",e),e.apiKey!==n)throw console.error("Invalid API Key"),new Error("Invalid API Key");return e}(e);!function(n){const e=document.getElementById("huddleWidgetContainer");if(e)e.innerHTML=n;else{const e=document.createElement("div");e.id="huddleWidgetContainer",e.className="huddle-widget-container",e.innerHTML=n,document.body.appendChild(e)}}('<div id="huddleWidgetContainer" class="huddle-widget-container">\n    <div id="huddleWidgetCircle" class="huddle-circle">\n    </div>\n    <div id="huddleWidget" class="huddle-widget">\n        <div id="huddleWidgetStoryContainer">\n            <div id="huddleWidgetStoryChaptersContainer">\n                \x3c!-- Story chapters will be dynamically loaded here --\x3e\n            </div>\n            <div id="huddleWidgetStoryProgressContainer">\n                \x3c!-- Story progress will be dynamically loaded here --\x3e\n            </div>\n\n            <div class="huddle-widget-nav-bar">\n                <button id="huddleWidgetMenuButton" class="huddle-menu-button"></button>\n                <div id="huddleWidgetStoryCategoriesContainer">\n                    \x3c!-- Story categories will be dynamically loaded here --\x3e\n                </div>\n                <button id="huddleWidgetClose" class="huddle-close-button"><svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M18 6L6 18" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n                    <path d="M6 6L18 18" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n                </svg></button>\n            </div>\n           \n        \n\n            \x3c!-- Stories will be dynamically loaded here --\x3e\n        </div>\n        <div id="huddleWidgetChatContainer">\n\n            \x3c!-- Chat messages will be dynamically loaded here --\x3e\n        </div>\n        <div id="huddleWidgetHideChat" class="clear-chat">\n            <button onclick="huddleToggleChat()">Hide Chat</button>\n        </div>\n        <div class="chat-input-container">\n            <input type="text" id="huddleWidgetChatInput" placeholder="Type a message...">\n            <button onclick="huddleSendMessage()">Send</button>\n        </div>\n    </div>\n</div>'),console.log("Appended HTML to the body.");const o=document.getElementById("huddleWidgetCircle");o.style.backgroundImage=`url(${n.avatarUrl})`;const i=document.getElementById("huddleWidget"),a=document.getElementById("huddleWidgetClose");document.getElementById("huddleWidgetMenuButton").style.backgroundImage=`url(${n.avatarUrl})`,n.uiTheme&&function(n){const e=document.getElementById("huddleWidget");n.backgroundColor&&(e.style.backgroundColor=n.backgroundColor),n.borderColor&&(e.style.borderColor=n.borderColor),n.borderRadius&&(e.style.borderRadius=n.borderRadius)}(n.uiTheme),t?(o.style.display="flex",console.log("Default display is true, showing the circle.")):(o.style.display="none",console.log("Default display is false, hiding the circle."));let r=!1;o.addEventListener("click",(()=>{console.log("Circle clicked."),"none"===i.style.display||""===i.style.display?(i.style.display="block",i.style.opacity="1",i.style.transform="scaleY(1) scaleX(1)",o.style.display="none",a.style.display="block",console.log("Widget opened."),r||(function(n,e){const t=document.getElementById("huddleWidgetStoryContainer"),o=document.getElementById("huddleWidgetStoryChaptersContainer"),i=document.getElementById("huddleWidgetStoryCategoriesContainer"),a=document.getElementById("huddleWidgetStoryProgressContainer");document.getElementById("huddleWidgetMenuButton").addEventListener("click",(n=>window.huddleToggleMenu(n)));let r=0,d=0,s=e[r],l=null,c=!1,u=0;function p(n,t){console.log("Displaying chapter:",n,t);const i=e[n].chapters[t],{type:r,url:d,length:p}=i.payload;(function(n){const{type:e,url:t}=n.payload;return new Promise((n=>{if("image"===e){const e=new Image;e.src=t,e.onload=()=>n()}else if("video"===e){const e=document.createElement("video");e.src=t,e.onloadeddata=()=>n()}}))})(i).then((()=>{let n="";"image"===r?n=`<img src="${d}" alt="Story Image" style="width: 100%; height: 100%; object-fit: cover;">`:"video"===r&&(n=`\n                    <video id="storyVideo" style="width: 100%; height: 100%; object-fit: cover;" autoplay muted>\n                        <source src="${d}" type="video/mp4">\n                        Your browser does not support the video tag.\n                    </video>\n                `);const e=document.createElement("div");var g,m;e.className="chapter",e.innerHTML=`\n                ${n}\n                <div class="story-overlay">\n                    <h2>${i.caption}</h2>\n                    <p>${i.description}</p>\n                </div>\n            `,o.appendChild(e),setTimeout((()=>{e.classList.add("show")}),10),setTimeout((()=>{const n=o.querySelector(".chapter:not(.show)");n&&(n.classList.remove("show"),setTimeout((()=>{o.removeChild(n)}),500))}),10),g=t,m=p,console.log("Updating progress bar for chapter index:",g),a.innerHTML="",s.chapters.forEach(((n,e)=>{const t=document.createElement("div");t.className="progress-bar";const o=document.createElement("div");o.className="fill",e<=g&&(e===g?(o.style.transition=`width ${m}s linear`,setTimeout((()=>{o.style.width="100%"}),50)):o.style.width="100%",console.log("Setting progress bar for chapter",e,"with duration",m)),t.appendChild(o),a.appendChild(t)})),l&&clearInterval(l),u=0,l=setInterval((()=>{c||(u++,console.log("Seconds passed:",u),u>=p&&(clearInterval(l),h()))}),1e3),"video"===r&&document.getElementById("storyVideo").addEventListener("ended",(()=>{c||(clearInterval(l),h())}))}))}function h(){console.log("Showing next chapter"),d<s.chapters.length-1?d++:d=0,p(r,d)}t.addEventListener("click",(n=>{const e=t.getBoundingClientRect();n.clientX-e.left<e.width/2?(console.log("Showing previous chapter"),d>0?d--:d=s.chapters.length-1,p(r,d)):h()})),p(r,d),n.forEach((n=>{const e=document.createElement("div");e.className="story-category",e.innerHTML=`\n            <img src="${n.image}" alt="Category Image">\n            <div class="category-caption">${n.caption}</div>\n        `,e.addEventListener("click",(e=>function(n,e){n.stopPropagation(),console.log("Category clicked:",e)}(e,n))),i.appendChild(e)})),window.huddleToggleMenu=n=>{if(n.stopPropagation(),console.log("Menu clicked"),[o,i,a].forEach((n=>{n.classList.toggle("huddle-widget-story-hidden")})),c=!c,c){const n=e[r].chapters[d],{type:t}=n.payload;if("video"===t){const n=document.getElementById("storyVideo");n&&n.pause()}l&&clearInterval(l)}else d=0,p(r,d)}}(n.storyCategories,n.stories),r=!0)):(i.style.display="none",a.style.display="none",console.log("Widget closed."))})),a.addEventListener("click",(()=>{i.style.display="none",t?(o.style.display="flex",a.style.display="none",console.log("Default display is true, showing the circle.")):(o.style.display="none",console.log("Default display is false, hiding the circle.")),console.log("Widget closed with close button.")})),function({initialData:n}){window.huddleSendMessage=()=>{const e=document.getElementById("huddleWidgetChatInput"),t=document.getElementById("huddleWidgetChatContainer");if(""===e.value.trim())return;const o=document.createElement("div");o.className="chat-message user-message",o.innerText=e.value,t.appendChild(o),e.value="",t.scrollTop=t.scrollHeight;const i=document.createElement("div");i.className="chat-message ai-message typing-indicator",i.innerHTML=`\n            <img src="${n.avatarUrl}" class="ai-avatar" alt="${n.aiName}">\n\n            <div class="dot"></div>\n            <div class="dot"></div>\n            <div class="dot"></div>\n        `,t.appendChild(i),t.scrollTop=t.scrollHeight,setTimeout((async()=>{i.remove();try{const o=await async function(n="",e={}){const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Error: ${t.status}`);return t.json()}("/chat/send-message",{message:e.value,payload:null}),i=document.createElement("div");i.className="chat-message ai-message",console.log("response:",o),i.innerHTML=`\n                    <img src="${n.avatarUrl}" class="ai-avatar" alt="${n.aiName}">\n                    <span>${o.message}</span>\n                `,t.appendChild(i),t.scrollTop=t.scrollHeight}catch(n){console.error("Error sending message:",n)}}),2e3)},window.huddleToggleChat=()=>{const n=document.getElementById("huddleWidgetChatContainer"),e=document.querySelector("#huddleWidgetHideChat button");return"none"===n.style.display?(n.style.display="block",void(e.innerText="Hide Chat")):(n.style.display="none",void(e.innerText="Show Chat"))}}({initialData:n});const d=document.getElementById("huddleWidgetChatContainer"),s=document.createElement("div");s.className="chat-message ai-message",s.innerHTML=`\n            <img src="${n.avatarUrl}" class="ai-avatar" alt="${n.aiName}">\n            <span>${n.greeting}</span>\n        `,d.appendChild(s),console.log("Greeting message displayed.")}catch(n){console.error("Failed to initialize the widget:",n)}else console.error("API Key is required to initialize the widget.")},window.HuddleWidget=function(n,e){"complete"===document.readyState||"interactive"===document.readyState?"initialize"===n&&(console.log("Document ready, initializing widget."),initializeHuddleWidget(e)):document.addEventListener("DOMContentLoaded",(function(){"initialize"===n&&(console.log("DOM content loaded, initializing widget."),initializeHuddleWidget(e))}));const t=window.HuddleWidget.q;if(t)for(let n=0;n<t.length;n++)console.log("Processing queued command:",t[n]),window.HuddleWidget.apply(null,t[n])},window.huddleSendMessage=async()=>{const n=document.getElementById("huddleWidgetChatInput"),e=document.querySelector(".huddleWidgetChatContainer");if(""===n.value.trim())return;const t=document.createElement("div");t.className="chat-message user-message",t.innerText=n.value,e.appendChild(t),n.value="",e.scrollTop=e.scrollHeight;const o=document.createElement("div");o.className="chat-message ai-message typing-indicator",o.innerHTML='\n        <img src="path/to/ai-avatar.png" class="ai-avatar" alt="Typing...">\n        <div class="dot"></div>\n        <div class="dot"></div>\n        <div class="dot"></div>\n    ',e.appendChild(o),e.scrollTop=e.scrollHeight,setTimeout((async()=>{o.remove();try{const t=await postData("/chat/send-message",{message:n.value,payload:null}),o=document.createElement("div");o.className="chat-message ai-message",console.log("response:",t),o.innerHTML=`\n                <img src="path/to/ai-avatar.png" class="ai-avatar" alt="AI">\n                <span>${t.message}</span>\n            `,e.appendChild(o),e.scrollTop=e.scrollHeight}catch(n){console.error("Error sending message:",n)}}),2e3)}})();